{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { Injectable, Component, NgModule } from '@angular/core';\nimport { createAction, props, createReducer, on, createFeatureSelector, createSelector } from '@ngrx/store';\nimport * as i1 from '@ngrx/effects';\nimport { createEffect, ofType } from '@ngrx/effects';\nimport { map } from 'rxjs/operators';\nimport * as i1$1 from '@angular/common/http';\nimport { HttpHeaders, HttpClientModule } from '@angular/common/http';\nimport { CommonModule } from '@angular/common';\nlet StoreService = /*#__PURE__*/(() => {\n  class StoreService {\n    constructor() {}\n\n  }\n\n  StoreService.ɵfac = function StoreService_Factory(t) {\n    return new (t || StoreService)();\n  };\n\n  StoreService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: StoreService,\n    factory: StoreService.ɵfac,\n    providedIn: 'root'\n  });\n  return StoreService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet StoreComponent = /*#__PURE__*/(() => {\n  class StoreComponent {\n    constructor() {}\n\n    ngOnInit() {}\n\n  }\n\n  StoreComponent.ɵfac = function StoreComponent_Factory(t) {\n    return new (t || StoreComponent)();\n  };\n\n  StoreComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: StoreComponent,\n    selectors: [[\"lib-store\"]],\n    decls: 2,\n    vars: 0,\n    template: function StoreComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"p\");\n        i0.ɵɵtext(1, \" store works! \");\n        i0.ɵɵelementEnd();\n      }\n    },\n    encapsulation: 2\n  });\n  return StoreComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet StoreLibModule = /*#__PURE__*/(() => {\n  class StoreLibModule {}\n\n  StoreLibModule.ɵfac = function StoreLibModule_Factory(t) {\n    return new (t || StoreLibModule)();\n  };\n\n  StoreLibModule.ɵmod = /*@__PURE__*/i0.ɵɵdefineNgModule({\n    type: StoreLibModule\n  });\n  StoreLibModule.ɵinj = /*@__PURE__*/i0.ɵɵdefineInjector({});\n  return StoreLibModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && i0.ɵɵsetNgModuleScope(StoreLibModule, {\n    declarations: [StoreComponent],\n    exports: [StoreComponent]\n  });\n})();\n\nconst taskActions = {\n  addTask: createAction('[Todo] Add Task', props()),\n  removeTask: createAction('[Todo] Remove Task', props()),\n  loadTasks: createAction('[Todo] Load Tasks'),\n  loadTasksSuccess: createAction('[Todo] Load Tasks success'),\n  loadTasksFailure: createAction('[Todo] Load Tasks failure', props()),\n  updateTask: createAction('[Todo] Update Task', props())\n};\nlet TodoEffects = /*#__PURE__*/(() => {\n  class TodoEffects {\n    constructor(actions$) {\n      // alert('TodoEffects constructor called!!!');\n      this.actions$ = actions$;\n      this.loadTodos$ = createEffect(() => {\n        // console.log('Setting up loadTodos$ effect');\n        return this.actions$.pipe( // tap(action => console.log('Action in pipe:', action)),\n        ofType(taskActions.loadTasks), // tap(() => alert('loadTodos action caught')),\n        map(() => taskActions.loadTasksSuccess()));\n      });\n      this.addTask$ = createEffect(() => {\n        // console.log('Setting up addTask$ effect');\n        return this.actions$.pipe( // tap(action => console.log('Action in pipe:', action)),\n        ofType(taskActions.addTask), // tap(() => alert('addTask action caught')),\n        map(_ => taskActions.loadTasksSuccess()));\n      });\n      this.removeTask$ = createEffect(() => {\n        // console.log('Setting up addTask$ effect');\n        return this.actions$.pipe( // tap(action => console.log('Action in pipe:', action)),\n        ofType(taskActions.removeTask), // tap(() => alert('addTask action caught')),\n        map(_ => taskActions.loadTasksSuccess()));\n      });\n      this.updateTask$ = createEffect(() => {\n        return this.actions$.pipe(ofType(taskActions.updateTask), map(_ => taskActions.loadTasksSuccess()));\n      }); // נוסיף subscription לדיבאג\n\n      this.actions$.subscribe(action => {\n        console.log('Action received in effects:', action);\n      });\n    }\n\n  }\n\n  TodoEffects.ɵfac = function TodoEffects_Factory(t) {\n    return new (t || TodoEffects)(i0.ɵɵinject(i1.Actions));\n  };\n\n  TodoEffects.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: TodoEffects,\n    factory: TodoEffects.ɵfac,\n    providedIn: 'root'\n  });\n  return TodoEffects;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nconst initialState = {\n  tasks: [] = []\n};\nconst todoReducer = createReducer(initialState, on(taskActions.loadTasks, state => Object.assign(Object.assign({}, state), {\n  loading: true\n})), on(taskActions.loadTasksSuccess, state => Object.assign(Object.assign({}, state), {\n  loading: false\n})), on(taskActions.loadTasksFailure, (state, {\n  error\n}) => Object.assign(Object.assign({}, state), {\n  loading: false,\n  error\n})), on(taskActions.addTask, (state, {\n  task\n}) => Object.assign(Object.assign({}, state), {\n  tasks: [...state.tasks, task] // דחיפת הנתון החדש למערך\n\n})), on(taskActions.removeTask, (state, {\n  id\n}) => Object.assign(Object.assign({}, state), {\n  tasks: state.tasks.filter(task => task.id !== id)\n})), on(taskActions.updateTask, (state, {\n  id,\n  newText\n}) => {\n  const taskExists = state.tasks.some(task => task.id === id);\n\n  if (!taskExists) {\n    alert(\"not exists\");\n    return state; // No changes if the task doesn't exist\n  }\n\n  return Object.assign(Object.assign({}, state), {\n    tasks: state.tasks.map(task => task.id === id ? Object.assign(Object.assign({}, task), {\n      text: newText\n    }) : task // Keep other tasks unchanged\n    )\n  });\n}));\nconst taskFeatureSelector = createFeatureSelector('todos');\nconst selectAllTodos$ = createSelector(taskFeatureSelector, ({\n  tasks\n}) => tasks); // export const selectTodoLoading = createSelector(\n//   selectTodoState,\n//   (state: TodoState) => state\n// );\n\nlet AddressService = /*#__PURE__*/(() => {\n  class AddressService {\n    constructor(http) {\n      this.http = http;\n      this.apiUrl = 'https://du-mock-checkout-7d42d0a76fbf.herokuapp.com';\n    } //https://du-mock-checkout-7d42d0a76fbf.herokuapp.com/#addresses\n\n\n    getDataWithToken(token) {\n      const headers = new HttpHeaders({\n        'Authorization': `Bearer ${token}`\n      });\n      return this.http.get(this.apiUrl + '/api/Address', {\n        headers\n      });\n    }\n\n  }\n\n  AddressService.ɵfac = function AddressService_Factory(t) {\n    return new (t || AddressService)(i0.ɵɵinject(i1$1.HttpClient));\n  };\n\n  AddressService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: AddressService,\n    factory: AddressService.ɵfac,\n    providedIn: 'root'\n  });\n  return AddressService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet PaymentService = /*#__PURE__*/(() => {\n  class PaymentService {\n    constructor(http) {\n      this.http = http;\n      this.apiUrl = 'https://du-mock-checkout-7d42d0a76fbf.herokuapp.com';\n    } //https://du-mock-checkout-7d42d0a76fbf.herokuapp.com/#addresses\n\n\n    getDataWithToken(token) {\n      const headers = new HttpHeaders({\n        'Authorization': `Bearer ${token}`\n      });\n      return this.http.get(this.apiUrl + '/api/Payment/Option', {\n        headers\n      });\n    }\n\n  }\n\n  PaymentService.ɵfac = function PaymentService_Factory(t) {\n    return new (t || PaymentService)(i0.ɵɵinject(i1$1.HttpClient));\n  };\n\n  PaymentService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: PaymentService,\n    factory: PaymentService.ɵfac,\n    providedIn: 'root'\n  });\n  return PaymentService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet ServicesModule = /*#__PURE__*/(() => {\n  class ServicesModule {}\n\n  ServicesModule.ɵfac = function ServicesModule_Factory(t) {\n    return new (t || ServicesModule)();\n  };\n\n  ServicesModule.ɵmod = /*@__PURE__*/i0.ɵɵdefineNgModule({\n    type: ServicesModule\n  });\n  ServicesModule.ɵinj = /*@__PURE__*/i0.ɵɵdefineInjector({\n    providers: [AddressService, PaymentService],\n    imports: [CommonModule, HttpClientModule]\n  });\n  return ServicesModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && i0.ɵɵsetNgModuleScope(ServicesModule, {\n    imports: [CommonModule, HttpClientModule]\n  });\n})();\n/*\r\n * Public API Surface of store\r\n */\n\n/**\r\n * Generated bundle index. Do not edit.\r\n */\n\n\nexport { AddressService, ServicesModule, StoreComponent, StoreLibModule, StoreService, TodoEffects, initialState, selectAllTodos$, taskActions, taskFeatureSelector, todoReducer };","map":{"version":3,"mappings":"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","names":["StoreService","constructor","factory","providedIn","StoreComponent","ngOnInit","selectors","decls","vars","template","i0","StoreLibModule","declarations","exports","addTask","createAction","props","removeTask","loadTasks","loadTasksSuccess","loadTasksFailure","updateTask","TodoEffects","actions$","createEffect","pipe","ofType","taskActions","map","_","subscribe","action","console","log","tasks","todoReducer","createReducer","initialState","on","state","Object","loading","error","task","id","filter","newText","taskExists","some","alert","text","taskFeatureSelector","createFeatureSelector","createSelector","AddressService","http","apiUrl","getDataWithToken","token","headers","HttpHeaders","get","PaymentService","ServicesModule","providers","imports","CommonModule","HttpClientModule"],"sources":["C:\\IttyHorowitz\\mini project\\to-do-list\\projects\\store\\src\\lib\\store.service.ts","C:\\IttyHorowitz\\mini project\\to-do-list\\projects\\store\\src\\lib\\store.component.ts","C:\\IttyHorowitz\\mini project\\to-do-list\\projects\\store\\src\\lib\\store.module.ts","C:\\IttyHorowitz\\mini project\\to-do-list\\projects\\store\\src\\lib\\store\\todo\\todo.actions.ts","C:\\IttyHorowitz\\mini project\\to-do-list\\projects\\store\\src\\lib\\store\\todo\\todo.effects.ts","C:\\IttyHorowitz\\mini project\\to-do-list\\projects\\store\\src\\lib\\store\\todo\\todo.state.ts","C:\\IttyHorowitz\\mini project\\to-do-list\\projects\\store\\src\\lib\\store\\todo\\todo.reducer.ts","C:\\IttyHorowitz\\mini project\\to-do-list\\projects\\store\\src\\lib\\store\\todo\\todo.selectors.ts","C:\\IttyHorowitz\\mini project\\to-do-list\\projects\\store\\src\\lib\\services\\address.service.ts","C:\\IttyHorowitz\\mini project\\to-do-list\\projects\\store\\src\\lib\\services\\payment.service.ts","C:\\IttyHorowitz\\mini project\\to-do-list\\projects\\store\\src\\lib\\services\\services.module.ts","C:\\IttyHorowitz\\mini project\\to-do-list\\projects\\store\\src\\public-api.ts","C:\\IttyHorowitz\\mini project\\to-do-list\\projects\\store\\src\\store.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class StoreService {\n\n  constructor() { }\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'lib-store',\n  template: `\n    <p>\n      store works!\n    </p>\n  `,\n  styles: [\n  ]\n})\nexport class StoreComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { StoreModule } from '@ngrx/store';\nimport { EffectsModule } from '@ngrx/effects';\nimport { TodoEffects } from './store/todo/todo.effects';\nimport { StoreComponent } from './store.component';\n\n@NgModule({\n  declarations: [StoreComponent],\n  imports: [\n  ],\n  exports: [StoreComponent]\n})\nexport class StoreLibModule { }\n","import { createAction, props } from '@ngrx/store';\r\nimport { Task } from './todo.state';\r\n\r\n\r\n\r\nexport const taskActions = {\r\n  addTask: createAction('[Todo] Add Task', props<{ task: Task }>()),\r\n  removeTask: createAction('[Todo] Remove Task', props<{ id: number }>()),\r\n  loadTasks: createAction('[Todo] Load Tasks'),\r\n  loadTasksSuccess: createAction('[Todo] Load Tasks success'),\r\n  loadTasksFailure: createAction('[Todo] Load Tasks failure', props<{ error: any }>()),\r\n  updateTask:createAction( '[Todo] Update Task',props<{ id: number, newText : string }>())\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Actions, createEffect, ofType } from '@ngrx/effects';\r\nimport { exhaustMap, map, tap } from 'rxjs/operators';\r\nimport { taskActions} from './todo.actions';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class TodoEffects {\r\n  constructor(private actions$: Actions) {\r\n    // alert('TodoEffects constructor called!!!');\r\n    \r\n    // נוסיף subscription לדיבאג\r\n    this.actions$.subscribe(action => {\r\n      console.log('Action received in effects:', action);\r\n    });\r\n  }\r\n\r\n  loadTodos$ = createEffect(() => {\r\n    // console.log('Setting up loadTodos$ effect');\r\n    return this.actions$.pipe(\r\n      // tap(action => console.log('Action in pipe:', action)),\r\n      ofType(taskActions.loadTasks),\r\n      // tap(() => alert('loadTodos action caught')),\r\n      map(() => taskActions.loadTasksSuccess())\r\n    );\r\n  });\r\n\r\n  addTask$ = createEffect(() => {\r\n    // console.log('Setting up addTask$ effect');\r\n    return this.actions$.pipe(\r\n      // tap(action => console.log('Action in pipe:', action)),\r\n      ofType(taskActions.addTask),\r\n      // tap(() => alert('addTask action caught')),\r\n        map(_ => taskActions.loadTasksSuccess())\r\n      )})  \r\n     \r\nremoveTask$ = createEffect(() => {\r\n  // console.log('Setting up addTask$ effect');\r\n  return this.actions$.pipe(\r\n    // tap(action => console.log('Action in pipe:', action)),\r\n    ofType(taskActions.removeTask),\r\n    // tap(() => alert('addTask action caught')),\r\n      map(_ => taskActions.loadTasksSuccess())\r\n    )})  \r\nupdateTask$ = createEffect(() => {\r\n  return this.actions$.pipe(\r\n    ofType(taskActions.updateTask),\r\n      map(_ => taskActions.loadTasksSuccess())\r\n    )})  \r\n} ","export interface Task {\r\n  id: number;\r\n  text: string;\r\n  completed?: boolean;\r\n}\r\n\r\nexport interface TodoState {\r\n  tasks: Task[];\r\n\r\n}\r\n\r\nexport const initialState: TodoState = {\r\n  tasks:[]=[],\r\n\r\n}; ","import { createReducer, on } from '@ngrx/store';\r\nimport { TodoState } from './todo.state';\r\nimport { taskActions} from './todo.actions';\r\nimport { initialState } from './todo.state';\r\n\r\nexport const todoReducer = createReducer(\r\ninitialState, \r\n  on(taskActions.loadTasks, state => ({\r\n    ...state,\r\n    loading: true\r\n  })),\r\n  on(taskActions.loadTasksSuccess, (state) => ({\r\n    ...state,\r\n    loading: false,\r\n  })),\r\n  on(taskActions.loadTasksFailure, (state, { error }) => ({\r\n    ...state,\r\n    loading: false,\r\n    error\r\n  })),\r\n  on(taskActions.addTask, (state, { task }) => ({\r\n    ...state,\r\n    tasks: [...state.tasks, task] // דחיפת הנתון החדש למערך\r\n\r\n   })),\r\n  on(taskActions.removeTask, (state, { id }) => ({\r\n    ...state,\r\n    tasks: state.tasks.filter(task => task.id !== id)\r\n  })),\r\n  on(taskActions.updateTask, (state, { id,newText }) => {\r\n    const taskExists = state.tasks.some(task => task.id === id);\r\n    if (!taskExists) {\r\n      alert(\"not exists\")\r\n      return state; // No changes if the task doesn't exist\r\n    }\r\n    return {\r\n      ...state,\r\n      tasks: state.tasks.map(task =>\r\n        task.id === id\r\n          ? { ...task, text: newText } // Update the task\r\n          : task // Keep other tasks unchanged\r\n      )\r\n    };\r\n  })\r\n);\r\n","import { createFeatureSelector, createSelector, MemoizedSelector } from '@ngrx/store';\r\nimport { TodoState } from './todo.state';\r\nimport { Task } from './todo.state';\r\n\r\nexport const taskFeatureSelector: MemoizedSelector<object, TodoState>  = createFeatureSelector<TodoState>('todos');\r\n\r\nexport const selectAllTodos$ : MemoizedSelector<object, Task[]> =\r\ncreateSelector(\r\n   taskFeatureSelector,\r\n     ({tasks}) => tasks );\r\n\r\n\r\n\r\n\r\n// export const selectTodoLoading = createSelector(\r\n//   selectTodoState,\r\n//   (state: TodoState) => state\r\n// ); ","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http'; \nimport { Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AddressService {\n\n  constructor(private http:HttpClient) { }\n  \n  apiUrl='https://du-mock-checkout-7d42d0a76fbf.herokuapp.com';\n  //https://du-mock-checkout-7d42d0a76fbf.herokuapp.com/#addresses\n  getDataWithToken(token: string): Observable<any> {\n\n\n    const headers = new HttpHeaders({\n      'Authorization': `Bearer ${token}`\n    });\n\n    return this.http.get<any>(this.apiUrl+'/api/Address', { headers });\n  }\n}\n","import { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PaymentService {\n\n \n  constructor(private http:HttpClient) { }\n  \n  apiUrl='https://du-mock-checkout-7d42d0a76fbf.herokuapp.com';\n  //https://du-mock-checkout-7d42d0a76fbf.herokuapp.com/#addresses\n  getDataWithToken(token: string): Observable<any> {\n\n\n    const headers = new HttpHeaders({\n      'Authorization': `Bearer ${token}`\n    });\n\n    return this.http.get<any>(this.apiUrl+'/api/Payment/Option', { headers });\n  }                        \n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { AddressService } from './address.service';\nimport { PaymentService } from './payment.service';\n\n\n\n@NgModule({\n  declarations: [],\n  imports: [\n    CommonModule,\n    HttpClientModule\n  ],\n  providers:[AddressService , PaymentService]\n})\nexport class ServicesModule { }\n","/*\n * Public API Surface of store\n */\n\nexport * from './lib/store.service';\nexport * from './lib/store.component';\nexport * from './lib/store.module';\n\nexport * from './lib/store/todo/todo.actions';\nexport * from './lib/store/todo/todo.effects';\nexport * from './lib/store/todo/todo.reducer';\nexport * from './lib/store/todo/todo.selectors';\nexport * from './lib/store/todo/todo.state';\nexport * from './lib/services/address.service';\nexport * from './lib/services/services.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"]},"metadata":{},"sourceType":"module"}